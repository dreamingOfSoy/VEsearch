const e=function(e=1){return new Promise((function(n,t){setTimeout((function(){t(new Error(`Request took too long! Timeout after ${e} second. <br/> Please try again...`))}),1e3*e)}))},n=async function(n){try{const t=await Promise.race([fetch(n),e(1)]),i=await t.json();if(!t.ok)throw new Error(`Bad Request: ${i.message} (Status:${t.status})`);return i}catch(e){throw e}},t={search:{query:"",results:[]},recipe:{}};const i=document.querySelector(".search-button"),s=document.querySelector(".search-input"),a=document.querySelector(".recipe-results-section"),r=document.querySelector(".recipe-results"),o=document.querySelector(".recipe-container"),c=document.querySelector(".right-arrow"),l=document.querySelector(".left-arrow");let u;const d=function(e){e.innerHTML="",e.insertAdjacentHTML("afterbegin",'\n  <div class="dot-pulse">\n    <div class="dot"></div>\n    <div class="dot"></div>\n    <div class="dot"></div>\n  </div>')},p=function(e,n="Recipe failed to load, try refreshing the page..."){const t=`\n    <div div class="error">\n        <p class="error-msg">\n          ${n}\n        </p>    \n     </div>\n`;e.innerHTML="",e.insertAdjacentHTML("afterbegin",t)},g=async function(){try{if(await async function(e){try{a.classList.remove("nodisplay"),d(o);const i=await n(`https://api.edamam.com/api/recipes/v2?type=public&app_id=64090b3f&app_key=863ec5c1694689e9e7474e4a313d6ed5&health=vegan&q=${e}`),{hits:s}=i;t.search.query=e,t.search.results=s.map((e=>({id:e._links.self.href.slice(38,70),title:e.recipe.label,publisher:e.recipe.source,imgURL:e.recipe.image}))),console.log(s)}catch(e){throw e}}(s.value),""===s.value)throw new Error("Please enter something in the search field above!");o.innerHTML="",t.search.results.forEach((e=>o.insertAdjacentHTML("beforeend",v(e)))),s.value="",u=r.clientWidth+4-20,r.addEventListener("click",(function(e){document.querySelectorAll(".results-box").forEach((e=>e.classList.remove("results-box--active"))),e.target.closest(".results-box").classList.add("results-box--active")}))}catch(e){p(o,e.message)}},v=e=>`\n        <a class="results-box" href="#${e.id}">\n        <div class="result" >\n          <div class="img">\n            <img\n              src="${e.imgURL}"\n              alt="Professional photograph of ${e.title}"\n              class="recipe-results-img"\n            />\n          </div>\n          <span class="result-title">${e.title}</span>\n          <span class="recipe-company result-company">${e.publisher}\n          </span>\n          </div>\n        </a>\n    `;let h=0;i.addEventListener("click",g),s.addEventListener("keydown",(e=>{13===e.keyCode&&g()})),c.addEventListener("click",(function(){h<t.search.results.length-4&&(h++,o.style.transform=`translateX(-${h*(u/4)}px)`)})),l.addEventListener("click",(function(){h>0&&(h--,o.style.transform=`translateX(-${h*(u/4)}px)`)}));const m=document.querySelector(".recipe-listing-section"),y=document.querySelector(".recipe-listing-container"),b=document.querySelector(".source-link-section"),f=async function(){try{const e=window.location.hash.slice(1);if(!e)return;await async function(e){try{m.classList.remove("nodisplay"),d(y);const i=await n(`https://api.edamam.com/api/recipes/v2/${e}?type=public&app_id=64090b3f&app_key=863ec5c1694689e9e7474e4a313d6ed5`),{recipe:s}=i;t.recipe={id:s.uri,title:s.label,publisher:s.source,imgURL:s.image,sourceUrl:s.url,servings:s.yield,ingredients:s.ingredients,nutrition:s.totalDaily,amountInGrams:s.digest,calories:s.calories}}catch(e){throw console.error(e),e}}(e),b.classList.remove("nodisplay"),y.innerHTML="",b.innerHTML="",t.recipe.ingredients.forEach((e=>{"0.3"===e.quantity.toString().slice(0,3)&&(e.quantity="1/3"),"0.25"===e.quantity.toString().slice(0,4)&&(e.quantity="1/4"),"0.5"===e.quantity.toString().slice(0,3)&&(e.quantity="1/2"),"0.75"===e.quantity.toString().slice(0,4)&&(e.quantity="3/4")})),y.insertAdjacentHTML("afterbegin",q(t.recipe)),b.insertAdjacentHTML("afterbegin",w(t.recipe))}catch(e){p(y)}},q=e=>`\n\n      <div class="recipe-img-box">\n      <img class="listing-img" src="${e.imgURL}"> \n      </div>\n\n      <h2 class="recipe-title">${e.title}</h2>\n\n      <div class="recipe-servings-box">\n        <button class="btn servings-button" data-update-to="${e.servings-1}">\n          <svg\n            xmlns="http://www.w3.org/2000/svg"\n            class="servings-icon"\n            viewBox="0 0 20 20"\n            fill="currentColor"\n          >\n            <path\n              fill-rule="evenodd"\n              d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z"\n              clip-rule="evenodd"\n            />\n          </svg>\n        </button>\n        <span class="num-servings quantity">${e.servings} serving(s)</span>\n        <button class="btn servings-button" data-update-to="${e.servings+1}">\n          <svg\n            xmlns="http://www.w3.org/2000/svg"\n            class="servings-icon"\n            viewBox="0 0 20 20"\n            fill="currentColor"\n          >\n            <path\n              fill-rule="evenodd"\n              d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z"\n              clip-rule="evenodd"\n            />\n          </svg>\n        </button>\n      </div>\n\n       <div class="nutrition-info">\n         <div class="nutrition-info-box">\n          <h3>Nutritional Facts</h3>\n          <h4>(Estimated per serving)</h4>\n          <ul class="nooch-list">\n            <li class="nooch-box"><p        class="nooch-title">Energy</p><p class= "nooch-amount">${(e.calories/e.servings).toFixed(0)}g</p><p  class="nooch-perc">${(e.nutrition.ENERC_KCAL.quantity/e.servings).toFixed(0)}%</p></li>\n            <li class="nooch-box"><p class="nooch-title">Carb</p><p class= "nooch-amount">${(Object.values(t.recipe.amountInGrams).find((e=>"Carbs"===e.label)).total/e.servings).toFixed(0)}${Object.values(t.recipe.amountInGrams).find((e=>"Carbs"===e.label)).unit}</p><p class="nooch-perc">${(e.nutrition.CHOCDF.quantity/e.servings).toFixed(0)}%</p></li>\n            <li class="nooch-box"><p class="nooch-title">Fat</p><p class= "nooch-amount">${(Object.values(t.recipe.amountInGrams).find((e=>"Fat"===e.label)).total/e.servings).toFixed(0)}${Object.values(t.recipe.amountInGrams).find((e=>"Fat"===e.label)).unit}</p><p class="nooch-perc">${(e.nutrition.FAT.quantity/e.servings).toFixed(0)}%</p></li>\n            <li class="nooch-box"><p class="nooch-title">Saturates</p><p class= "nooch-amount">${(Object.values(t.recipe.amountInGrams).find((e=>"Fat"===e.label)).sub.find((e=>"Saturated"===e.label)).total/e.servings).toFixed(0)}${Object.values(t.recipe.amountInGrams).find((e=>"Fat"===e.label)).sub.find((e=>"Saturated"===e.label)).unit}</p><p class="nooch-perc">${(e.nutrition.FASAT.quantity/e.servings).toFixed(0)}%</p></li>\n            <li class="nooch-box"><p class="nooch-title">Salt</p><p class= "nooch-amount">${(Object.values(t.recipe.amountInGrams).find((e=>"Sodium"===e.label)).total/e.servings).toFixed(0)}${Object.values(t.recipe.amountInGrams).find((e=>"Sodium"===e.label)).unit}</p><p class="nooch-perc">${(e.nutrition.NA.quantity/e.servings).toFixed(0)}%</p></li>\n          </ul>\n         </div>\n        </div>\n\n        <div class="ingredients-box">\n\n        <h2 class="recipe-list-title">Recipe Ingredients</h2>\n\n        <ul class="recipe-list">\n          ${e.ingredients.map((e=>`\n            <li class="ing-item">\n              <span class="ingredient"\n                ><svg\n                  xmlns="http://www.w3.org/2000/svg"\n                  class="ing-icon"\n                  viewBox="0 0 20 20"\n                  fill="currentColor"\n                >\n                  <path\n                    d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"\n                  />\n                </svg><span class="quantity">\n                ${0===e.quantity?"":e.quantity.toString().slice(0,4)} ${"<unit>"===e.measure||0===e.quantity?"":`${e.measure}(s)`} ${e.food.toLowerCase()}</span>\n              </span>\n            </li>\n          `)).join("")}\n          </ul>\n        </div>\n      `,w=e=>`\n    <h2 class="source-link-title">Want to cook this recipe?</h2>\n    <span class="source-link-desc"\n      >This recipe was put together by\n      <span class="source-recipe-company">${e.publisher}</span>. For\n      instructions on how to cook it, visit their website here:</span\n    >\n    <a href="${e.sourceUrl}" class="source-link"\n      ><button class="btn source-link-button">Cook it!</button></a\n    >\n  `;["hashchange","load"].forEach((e=>window.addEventListener(e,f)));m.addEventListener("click",(function(e){const n=e.target.closest(".servings-button");if(!n)return;const{updateTo:i}=n.dataset;+i>0&&function(e){t.recipe.ingredients.forEach((n=>{"1/3"===n.quantity&&(n.quantity=.3333333333333333),"1/4"===n.quantity&&(n.quantity=.25),"1/2"===n.quantity&&(n.quantity=.5),"3/4"===n.quantity&&(n.quantity=.75),n.quantity=n.quantity*e/t.recipe.servings,t.recipe.ingredients.forEach((e=>{"0.3"===e.quantity.toString().slice(0,3)&&(e.quantity="1/3"),"0.25"===e.quantity.toString().slice(0,4)&&(e.quantity="1/4"),"0.5"===e.quantity.toString().slice(0,3)&&(e.quantity="1/2"),"0.75"===e.quantity.toString().slice(0,4)&&(e.quantity="3/4")}))})),console.log(t.recipe.ingredients),t.recipe.servings=e;const n=q(t.recipe),i=document.createRange().createContextualFragment(n),s=Array.from(i.querySelectorAll("*")),a=Array.from(y.querySelectorAll("*"));s.forEach(((e,n)=>{const t=a[n];!e.isEqualNode(t)&&e.classList.contains("quantity")&&(t.textContent=e.textContent),e.isEqualNode(t)||Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value)))}))}(+i)}));
//# sourceMappingURL=index.5beda32d.js.map
